---
description: Querying with GraphQL.
---

import { Callout } from "nextra-theme-docs";

# Querying With GraphQL

Transaction metadata can be queried using GraphQL. This includes both metadata automatically stored for each transaction and custom metadata you design yourself using our [tags](/developer-docs/tags) feature.

<Callout type="info" emoji="ℹ️">
	If you prefer learning by building a project, you may enjoy this [step-by-step
	tutorial](/hands-on/tutorials/graphql-explorer) where you’ll learn how to setup a project, install the Apollo
	GraphQL libraries and then build a tool to search Arweave for recently uploaded image files.
</Callout>

## Bundlr vs Arweave GraphQL

Bundlr GraphQL and [Arweave GraphQL](https://gql-guide.vercel.app/) both offer ways to query transaction metadata, however, they differ in several ways. Bundlr GraphQL requires you to connect to the node-specific endpoint where you posted your transaction, while Arweave GraphQL uses a universal endpoint for all queries. Bundlr GraphQL is cross-chain, it includes the address (regardless of chain) that posted the transaction, while Arweave GraphQL only includes Arweave addresses. Bundlr GraphQL also includes the [currency](/overview/supported-tokens) used for payment, [a receipt](/learn/receipts) ([if requested when uploading](/developer-docs/sdk/api/uploadWithReceipt)), and a true timestamp accurate to the millisecond of when the transaction was posted. Arweave GraphQL allows for querying by [block structure](https://gql-guide.vercel.app/#block-query-structures), including block ID, block range, and block height, which Bundlr GraphQL does not support.

|                                                         | Bundlr GraphQL                                                                                                                                                     | Arweave GraphQL                                                                                                             |
| ------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------- |
| Endpoint                                                | Node-specefic. Connect to the endpoint associated with the node where you posted your transaction.                                                                 | Universal endpoint for all queries.                                                                                         |
| Cross-chain                                             | Yes. Includes the address (regardless of chain) that posted the transaction.                                                                                       | No. Includes Arweave addresses only.                                                                                        |
| Original payment [currency](/overview/supported-tokens) | Included.                                                                                                                                                          | Not included.                                                                                                               |
| Timestamp                                               | Includes a timestamp accurate to the millisecond of when the transaction was posted, along with an (optional) cryptographically signed [receipt](/learn/receipts). | Timestamp is based on block time, accurate to ~2 minutes.                                                                   |
| Blocks                                                  | Not included.                                                                                                                                                      | [Included](https://gql-guide.vercel.app/#block-query-structures). You can query by block ID, block range, and block height. |

## GraphQL Clients

You can query using an HTTP library like fetch or axios. You can also use specialized clients like [Apollo Client](https://www.apollographql.com/) or [urql](https://formidable.com/open-source/urql/).

The next two sections detail first [Bundlr GraphQL](/developer-docs/graphql#bundlr-graphql) followed by [Arweave GraphQL](/developer-docs/graphql#arweave-graphql). While the two schemas are similar, there are differences you’ll need to be aware of when developing your projects. There is no one schema that is “better” than the other, the decision on which to use will depend on your own project and your specific needs.

## Bundlr GraphQL

### Anatomy Of A Query

A GraphQL query is made up of:

-   Query Arguments: Arguments that specify search parameters, limit the number of results returned, or enable pagination.
-   Results Fields: Fields that define the data you want to retrieve.

<img className="border border-[#FEF4EE] rounded mt-5 w-5/6" src="/img/graphql/BundlrGQL-Anatomy.png" />

### Query Arguments

Any of the following query arguments can be used as search parameters:

| Field      | Description                                                                                                                                                                                                |
| ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ids`      | An array of transaction IDs passed as strings. Values are ORed together, matching results will include transactions that have any of the supplied IDs.                                                     |
| `owner`    | The address used when posting the transaction. Can be a native address from [any of the chains supported by Bundlr](/overview/supported-tokens). Note in results fields, this is referred to as `address`. |
| `currency` | The [currency](/overview/supported-tokens) used to pay for the transaction.                                                                                                                                |
| `tags`     | An array of tag name / value pairs passed as JSON objects. Values are ORed together, matching results will include transactions matching any of the supplied tags.                                         |

### Results Fields

When building a query, any of the following values be included in your results:
| Field | Description |
|---|---|
| `id` | The transaction ID. |
| `address` | The address used when posting the transaction. Can be a native address from any of the chains supported by Bundlr. Note in query arguements, this is referred to as `owner`. |
| `currency` | The currency used to pay for the transaction. |
| `receipt { `<br/>&nbsp;&nbsp;`deadlineHeight `<br/>&nbsp;&nbsp;`signature  `<br/>&nbsp;&nbsp;`version `<br/>`}` | An optional receipt, only exists if a user requested one at upload.<br/> `deadlineHeight`: The block number by which the transaction must be finalized on Arweave. <br/>`signature`: A signed deep hash of the JSON receipt. |
| `tags {    `<br/>&nbsp;&nbsp;`name     `<br/>&nbsp;&nbsp;`value`<br/>`}` | An array of tags supplied as name / value pairs. Exists if the user added them at upload. |
|`timestamp` | The timestamp, accurate to the millisecond of when the transaction was posted. In cases where there exists a receipt, this value will be the same as the receipt timestamp. |

### Endpoints

Connect to the GraphQL endpoint associated with the node you uploaded your transaction to.

| Node   | Endpoint                              |
| ------ | ------------------------------------- |
| Node 1 | https://node1.bundlr.network/graphql  |
| Node 2 | https://node2.bundlr.network/graphql  |
| Devnet | https://devnet.bundlr.network/graphql |

### GraphQL Sandbox

Clicking on any of the endpoint URLs above will direct you to the GraphQL Sandbox used for building and testing queries. Press Control+Space at any time to see an interactive popup window of either query arguments or results fields.

<img className="border border-[#FEF4EE] rounded mt-5 w-5/6" src="/img/graphql/BundlrGQL-Sandbox.png" />

### Sample Queries

Queries return transaction metadata. To then retrieve data, use the returned transaction ID and download the data from a [gateway](/learn/gateways) using an URL formed as follows `https://arweave.net/[transaction-id]`.

#### Transaction IDs

Search by transaction IDs.

```graphql
query getByIds {
	transactions(ids: ["--52WQHJIJod_rni8pkl1Vxt9MFGoXZAm8SC7ex6C1o", "--52THRWpX_RJzGcNXmtQ2DSP37d1e1VQ4YmvbY5ZXo"]) {
		edges {
			node {
				id
				tags {
					name
					value
				}
			}
		}
	}
}
```

#### Owners

Search for transactions matching the wallet address used when posting the transaction.

```graphql
query getByOwner {
	transactions(owners: ["0xBcb812C6e26F4F0F78Bd7B6222461FF24F2942AE", "0xaC568a981B1370B2e1bAA8cE30BD5AC9E28C572D"]) {
		edges {
			node {
				id
				address
			}
		}
	}
}
```

#### Tags

Search for transactions matching [tag](/developer-docs/tags) name / value pairs.

```graphql
query getAllPNGs {
	transactions(tags: [{ name: "Content-Type", values: ["image/png"] }]) {
		edges {
			node {
				id
				address
			}
		}
	}
}
```

#### Limiting Results

Limit the number of results returned by including the `limit` parameter.

```graphql
query getAllPNGs {
	transactions(limit: 10, tags: [{ name: "Content-Type", values: ["image/png"] }]) {
		edges {
			node {
				id
				address
			}
		}
	}
}
```

#### Pagination

You can request a maximum of 100 results returned from each query, to obtain additional results use pagination.

When using pagination you:

1. Retrieve the `cursor` field, this acts like a bookmark in the search results you can then return to.
2. Use saved `cursor` value to obtain subsequent search results.

The following query returns 10 transactions tagged `image/png` occurring after the cursor with value: `LS02d1NsM3R6aUprd3dKUzVjN1FXaWg5aUxsbXh5dVJJbGlydHJtNlpPbw`. To then obtain the next 10 transactions, use the final `cursor` value returned from this query as the value of the `after` parameter in the following query.

```graphql
query getPNGs {
	transactions(
		limit: 10
		tags: [{ name: "Content-Type", values: ["image/png"] }]
		after: "LS02d1NsM3R6aUprd3dKUzVjN1FXaWg5aUxsbXh5dVJJbGlydHJtNlpPbw"
	) {
		edges {
			node {
				id
			}
			cursor
		}
	}
}
```

#### Sorting

You can sort results by timestamp in either ascending or descending order using the `order` field.

```graphql
query getAllByOwnerAsc {
	transactions(owners: ["0xBcb812C6e26F4F0F78Bd7B6222461FF24F2942AE"], order: ASC) {
		edges {
			node {
				id
				address
			}
		}
	}
}
```

```graphql
query getAllByOwnerDesc {
	transactions(owners: ["0xBcb812C6e26F4F0F78Bd7B6222461FF24F2942AE"], order: DESC) {
		edges {
			node {
				id
				address
			}
		}
	}
}
```

## Arweave GraphQL

### Anatomy Of A Query

A GraphQL query is made up of:

-   Query Arguments: Arguments that specify search parameters, limit the number of results returned, or enable pagination.
-   Results Fields: Fields that define the data you want to retrieve.

<img className="border border-[#FEF4EE] rounded mt-5 w-5/6" src="/img/graphql/ArweaveGQL-Anatomy.png" />

### Query Arguments

Any of the following query arguments can be used as search parameters:

| Field        | Description                                                                                                                                                                                                                                                                                           |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ids`        | An array of transaction IDs passed as strings. Values are ORed together, matching results will include transactions that have any of the supplied IDs.                                                                                                                                                |
| `owner`      | The Arweave address used when posting the transaction. Note if you post to Bundlr using a non-Arweave wallet address, it will be converted into an Arweave-like address and stored in this field. There is no way to retrieve eth or sol addresses from Arweave GraphQL, you must use Bundlr GraphQL. |
| `recipients` | The [currency](/overview/supported-tokens) used to pay for the transaction.                                                                                                                                                                                                                           |
| `bundledIn`  | Transaction ID of the parent bundle for this transaction. Transaction ID can be of a nested bundle or a regular bundle.                                                                                                                                                                               |
| `block`      | Details specific to a transaction's block.                                                                                                                                                                                                                                                            |
| `tags`       | An array of tag name / value pairs passed as JSON objects. Values are ORed together, matching results will include transactions matching any of the supplied tags.                                                                                                                                    |

### Results Fields

When building a query, you can request any of the following values be included in your results:
| Field | Description |
|---|---|
| `id` | The transaction ID. |
| `anchor` | A value used to prevent against double spends. |
| `signature` | The signature used to sign the transaction. |
| `recipient` | Address of the account the tx was sent to (use for fund transfers). |
| `owner` | The Arweave address used when posting the transaction. Note if you post to Bundlr using a non-Arweave wallet address, it will be converted into an Arweave-like address and stored in this field. There is no way to retrieve eth or sol addresses from Arweave GraphQL, you must use Bundlr GraphQL. |
| `fee {     `<br/>&nbsp;&nbsp;`winston      `<br/>&nbsp;&nbsp;`ar `<br/>`}` | The transaction mining fee. |
| `quantity {      `<br/>&nbsp;&nbsp;`winston      `<br/>&nbsp;&nbsp;`ar `<br/>`}` | The amount paid for the transaction. |
| `data {      `<br/>&nbsp;&nbsp;`size      `<br/>&nbsp;&nbsp;`type `<br/>`}` | The size and type of the data payload. |
| `tags` | An array of [tags](/developer-docs/tags) supplied as name / value pairs. Exists if the user added them at upload. |
| `block {      `<br/>&nbsp;&nbsp;`id      `<br/>&nbsp;&nbsp;`timestamp     `<br/>&nbsp;&nbsp;`height     `<br/>&nbsp;&nbsp;`previous `<br/>`}` | Details specific to a transaction's block, including block number, mining date, block hash, and the previous block hash. |
| `bundledIn` | Transaction ID of the parent bundle for this transaction. Transaction ID can be of a nested bundle or a regular bundle. |

### Endpoints

Arweave offers a universal endpoint, you do not need to pick an endpoint associated with the node you uploaded to. The three endpoints below all provide access to the same dataset, use the one with the fastest response times.

-   https://arweave.net/graphql
-   https://arweave.dev/graphql
-   https://arweave-search.goldsky.com/graphql

### GraphQL Playground

Clicking on any of the endpoint URLs will direct you to the GraphQL Playground used for building and testing queries. Press Control+Space at any time to see an interactive popup window of either query arguments or results fields.

<img className="border border-[#FEF4EE] rounded mt-5 w-5/6" src="/img/graphql/ArweaveGQL-Sandbox.png" />

### Sample Queries

Queries return transaction metadata. To then retrieve data, use the returned transaction ID and download the data from a [gateway](/learn/gateways) using an URL formed as follows `https://arweave.net/[transaction-id]`.

#### Transaction IDs

Search by transaction IDs.

```graphql
query getByIds {
	transactions(ids: ["1t-Z0oDxQLvACpLXUwwfbplw7vHialWH8mkNAvzTkDw", "1w6PBHQ5e0hMJWsfRCJr66JvQAcyws0k4D97kG4GVm8"]) {
		edges {
			node {
				id
				tags {
					name
					value
				}
			}
		}
	}
}
```

#### Owners

Search for transactions matching the Arweave wallet address used when posting the transaction.

```graphql
query getByOwners {
    transactions(owners:["M6w588ZkR8SVFdPkNXdBy4sqbMN0Y3F8ZJUWm2WCm8M"]) {
        edges {
            node {
                id
            }
        }
    }
```

#### Tags

Search for transactions matching [tag](/developer-docs/tags) name / value pairs.

```graphql
query getAllPNGs {
	transactions(tags: { name: "Content-Type", values: ["image/png"] }) {
		edges {
			node {
				id
			}
		}
	}
}
```

#### Limiting Results

Limit the number of results returned by including the `first` parameter.

```graphql
query get10Pngs {
	transactions(first: 10, tags: { name: "Content-Type", values: ["image/png"] }) {
		edges {
			node {
				id
			}
		}
	}
}
```

#### Pagination

You can request a maximum of 100 results returned from each query, to obtain additional results use pagination.

When using pagination you must:

1. Retrieve the cursor field, this acts like a bookmark in the search results you can then return to.
2. Use saved cursor values to obtain subsequent search results.

The following query returns 10 transactions tagged `image/png` occurring after the cursor with value `LS02d1NsM3R6aUprd3dKUzVjN1FXaWg5aUxsbXh5dVJJbGlydHJtNlpPbw`. To then obtain the next 10 transactions, use the final `cursor` value returned from this query as the value of the `after` parameter in the following query.

```graphql
query getPNGs {
	transactions(
		first: 10
		tags: [{ name: "Content-Type", values: ["image/png"] }]
		after: "LS02d1NsM3R6aUprd3dKUzVjN1FXaWg5aUxsbXh5dVJJbGlydHJtNlpPbw"
	) {
		edges {
			node {
				id
			}
			cursor
		}
	}
}
```

#### Sorting

You can sort results by block height in either ascending or descending order using the `sort` parameter.

```graphql
query getByOwnersAsc {
	transactions(owners: ["M6w588ZkR8SVFdPkNXdBy4sqbMN0Y3F8ZJUWm2WCm8M"], sort: HEIGHT_ASC) {
		edges {
			node {
				id
			}
		}
	}
}
```

```graphql
query getByOwnersDesc {
	transactions(owners: ["M6w588ZkR8SVFdPkNXdBy4sqbMN0Y3F8ZJUWm2WCm8M"], sort: HEIGHT_DESC) {
		edges {
			node {
				id
			}
		}
	}
}
```

#### Further Reading

Additional information on Arweave GraphQL [can be found on their website](https://gql-guide.vercel.app/).
